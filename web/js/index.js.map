{"version":3,"file":"index.js","sources":["../src/debugString.ts"],"sourcesContent":["import { app } from '@comfyorg/comfyui-frontend/src/scripts/app';\r\nimport type { ComfyExtension } from '@comfyorg/comfyui-frontend/src/types/comfy';\r\n\r\nconst NODE_TITLE_HEIGHT = 30;\r\n\r\nconst extension: ComfyExtension = {\r\n  name: \"TypeScript-CustomNode.DebugString\",\r\n  beforeRegisterNodeDef: function async(nodeType, nodeData, _comfyApp) {\r\n    if (nodeData.name === 'DebugString') {\r\n      console.log(`Registering ${nodeData.name}`);\r\n\r\n      function draw(ctx: CanvasRenderingContext2D) {\r\n        console.log({ \"this\": this })\r\n\r\n        const widgets_values = this.widgets_values;\r\n        console.log(`draw: ${widgets_values}`);\r\n\r\n        ctx.font = '12px sans-serif';\r\n        ctx.fillStyle = '#ffffff';\r\n        ctx.fillText(widgets_values, 5, -NODE_TITLE_HEIGHT - 5);\r\n      }\r\n\r\n      const onDrawForeground = nodeType.prototype.onDrawForeground;\r\n      nodeType.prototype.onDrawForeground = function (ctx: CanvasRenderingContext2D) {\r\n        onDrawForeground?.apply(this, arguments);\r\n        console.log({ \"BUG: this is not updated.\": this, arguments })\r\n        draw.call(this, ctx);\r\n      };\r\n    }\r\n  }\r\n};\r\n\r\napp.registerExtension(extension);\r\n"],"names":[],"mappings":";AAKA,MAAM,YAA4B;AAAA,EAChC,MAAM;AAAA,EACN,uBAAuB,SAAS,MAAM,UAAU,UAAU,WAAW;AAC/D,QAAA,SAAS,SAAS,eAAe;AAG1B,UAAA,OAAT,SAAc,KAA+B;AAC3C,gBAAQ,IAAI,EAAE,QAAQ,KAAA,CAAM;AAE5B,cAAM,iBAAiB,KAAK;AACpB,gBAAA,IAAI,SAAS,cAAc,EAAE;AAErC,YAAI,OAAO;AACX,YAAI,YAAY;AAChB,YAAI,SAAS,gBAAgB,GAAG,MAAqB,CAAC;AAAA,MACxD;AAXA,cAAQ,IAAI,eAAe,SAAS,IAAI,EAAE;AAapC,YAAA,mBAAmB,SAAS,UAAU;AACnC,eAAA,UAAU,mBAAmB,SAAU,KAA+B;AAC3D,0BAAA,MAAM,MAAM,SAAS;AACvC,gBAAQ,IAAI,EAAE,6BAA6B,MAAM,WAAW;AACvD,aAAA,KAAK,MAAM,GAAG;AAAA,MACrB;AAAA,IAAA;AAAA,EACF;AAEJ;AAEA,IAAI,kBAAkB,SAAS;"}